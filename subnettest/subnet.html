<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generátor a kontrola IP adres</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            margin-bottom: 20px;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ccc;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
        }
        .valid {
            background-color: lightgreen;
        }
        .invalid {
            background-color: lightcoral;
        }
        .generate-btn, .check-btn {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px 0;
            cursor: pointer;
        }
        .message {
            font-weight: bold;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Generátor a kontrola IP adres</h1>

    <button class="generate-btn" onclick="generateHosts()">Generovat hosty</button>
    <button class="check-btn" onclick="checkAnswers()">Kontrola</button>

    <!-- Tabulka pro zadávání údajů -->
    <table id="hostsTable">
        <thead>
            <tr>
                <th>Host</th>
                <th>Adresa sítě</th>
                <th>Broadcast adresa</th>
                <th>Prefix</th>
            </tr>
        </thead>
        <tbody>
            <!-- Zde se budou přidávat řádky pro každý vygenerovaný host -->
        </tbody>
    </table>

    <!-- Zpráva pro uživatele -->
    <div id="message" class="message"></div>

    <script>
        let generatedHosts = [];
        let networkPrefix = 24;  // Prefix pro vygenerované adresy

        // Funkce pro generování náhodných hostů
        function generateHosts() {
            const hostsTable = document.getElementById('hostsTable').getElementsByTagName('tbody')[0];
            hostsTable.innerHTML = '';  // Vyprázdnění tabulky před generováním nových hostů
            generatedHosts = [];

            // Generování 5 náhodných hostů
            for (let i = 0; i < 5; i++) {
                let baseIP = `192.168.1.${Math.floor(Math.random() * 254) + 1}`;
                generatedHosts.push(baseIP);

                // Přidání řádku do tabulky pro každý host
                let row = hostsTable.insertRow();
                row.insertCell(0).textContent = baseIP;
                row.insertCell(1).innerHTML = `<input type="text" id="network_${i}" placeholder="Např. 192.168.1.0/24">`;
                row.insertCell(2).innerHTML = `<input type="text" id="broadcast_${i}" placeholder="Např. 192.168.1.255">`;
                row.insertCell(3).innerHTML = `<input type="number" id="prefix_${i}" value="${networkPrefix}">`;
            }
        }

        // Funkce pro kontrolu odpovědí uživatele
        function checkAnswers() {
            let message = document.getElementById('message');
            let allCorrect = true;
            message.textContent = '';  // Resetování zprávy

            // Projít každý host a zkontrolovat odpovědi
            generatedHosts.forEach((host, i) => {
                const networkAddressInput = document.getElementById(`network_${i}`);
                const broadcastAddressInput = document.getElementById(`broadcast_${i}`);
                const prefixInput = document.getElementById(`prefix_${i}`);
                
                // Výpočet správné sítě a broadcastu pro daný host
                const network = `${host.split('.')[0]}.${host.split('.')[1]}.${host.split('.')[2]}.0/${prefixInput.value}`;
                const broadcast = `${host.split('.')[0]}.${host.split('.')[1]}.${host.split('.')[2]}.255`;
                const correctPrefix = networkPrefix;

                // Zkontrolovat, zda odpovědi odpovídají správným hodnotám
                let isNetworkCorrect = networkAddressInput.value === network;
                let isBroadcastCorrect = broadcastAddressInput.value === broadcast;
                let isPrefixCorrect = parseInt(prefixInput.value) === correctPrefix;

                // Zvýraznění odpovědí
                if (isNetworkCorrect) {
                    networkAddressInput.classList.add('valid');
                    networkAddressInput.classList.remove('invalid');
                } else {
                    networkAddressInput.classList.add('invalid');
                    networkAddressInput.classList.remove('valid');
                    allCorrect = false;
                }

                if (isBroadcastCorrect) {
                    broadcastAddressInput.classList.add('valid');
                    broadcastAddressInput.classList.remove('invalid');
                } else {
                    broadcastAddressInput.classList.add('invalid');
                    broadcastAddressInput.classList.remove('valid');
                    allCorrect = false;
                }

                if (isPrefixCorrect) {
                    prefixInput.classList.add('valid');
                    prefixInput.classList.remove('invalid');
                } else {
                    prefixInput.classList.add('invalid');
                    prefixInput.classList.remove('valid');
                    allCorrect = false;
                }
            });

            // Zpráva pro uživatele
            if (allCorrect) {
                message.textContent = "Vše je správně!";
            } else {
                message.textContent = "Některé hodnoty jsou nesprávné. Opravy: ";
            }
        }
    </script>
</body>
</html>
